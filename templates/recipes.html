{% extends "layout.html" %} {% block title %} Search {% endblock %} {% block
content %}
<h1>Recipes</h1>
<ul>
	{% if recipes %}
	<ul>
		{% for recipe in recipes %}
		<li>
			<h2>{{ recipe.title }}</h2>
			{% if recipe.image %}
			<img
				src="{{ recipe.image }}"
				alt="{{ recipe.title }}"
				style="max-width: 200px; height: auto"
			/>
			{% endif %}
			<a href="{{ recipe_data.sourceUrl }}" target="_blank">View Recipe</a>
			<p>
				You have {{ recipe.ingredient_count - recipe.missedIngredientCount }}/{{
				recipe.ingredient_count }} ingredients
			</p>
		</li>

		<form id="save-recipe-form" action="/save_recipe" method="post">
			<input type="hidden" name="recipe_name" value="{{ recipe.title }}" />
			<input type="hidden" name="recipe_id" value="{{ recipe.id }}" />
			<input
				type="hidden"
				name="missing_ingredients"
				value="{{ recipe['missing_ingredients'] }}"
			/>
			<input type="hidden" name="image_url" value="{{ recipe.image }}" />
			<input
				type="hidden"
				name="recipe_url"
				value="{{ recipe_data.sourceUrl }}"
			/>
			<button type="submit">Save Recipe</button>
		</form>
		<form id="add-to-cart-form" action="/add_to_cart" method="post">
			<input type="hidden" name="recipe_name" value="{{ recipe.title }}" />
			<input type="hidden" name="recipe_id" value="{{ recipe.id }}" />
			<input
				type="hidden"
				name="missing_ingredients"
				value="{{ recipe['missing_ingredients'] }}"
			/>
			<button type="submit">Add to Cart</button>
		</form>
		{% endfor %}
	</ul>
	{% endif %}
</ul>

{% endblock %}
